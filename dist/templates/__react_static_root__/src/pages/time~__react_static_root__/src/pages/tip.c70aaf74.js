(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{230:function(e,t,n){"use strict";var a,c=n(30),r=n.n(c),i=n(24),s=n.n(i),u=n(1),o=n.n(u),l=n(4),p=n.n(l),f=n(73),d=n(71),m=n(43),b=n(113),h=n.n(b),v=n(64),g=n(72),E=n(234),O=n(57),w=n(51),j=n(69),k=n(44);n(223);function y(){return(y=r()(o.a.mark((function e(t,n,a){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,t.approve(n,O.a);case 4:return c=e.sent,e.next=7,c.wait();case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:a(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function N(){return(N=r()(o.a.mark((function e(t,n,a,c,r,i,s){var u,l,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.replace(/,/g,""),console.log(a,c,r,i),s(!0),u=k.b[n][a.toLowerCase()],l=new v.a(k.b[n].tipping,k.a.Tipping,t),e.prev=5,e.next=8,l.tip(c,Object(g.b)(r),u,Object(E.a)(i));case 8:return p=e.sent,e.next=11,p.wait();case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),e.t0;case 16:s(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}t.a=function(e){var t=Object(m.b)(),n=t.account,c=t.active,i=t.chainId,u=t.library,b=Object(w.b)(),v=b.signer,E=(b.feeBalance,b.donutBalance,b.token),O=(b.tipping,Object(l.useState)(!1)),x=s()(O,2),S=x[0],T=x[1],C=Object(l.useState)(""),U=s()(C,2),D=U[0],L=U[1],M=Object(l.useState)(e.contentId),P=s()(M,2),R=P[0],B=P[1],F=Object(l.useState)(e.recipient||""),I=s()(F,2),J=I[0],q=I[1],A=Object(l.useState)(e.address),K=s()(A,2),W=K[0],_=K[1],z=Object(l.useState)("1"),G=s()(z,2),H=G[0],Q=G[1],V=Object(l.useState)(!1),X=s()(V,2),Y=X[0],Z=X[1],$=Object(l.useState)(""),ee=s()($,2),te=ee[0],ne=ee[1],ae=Object(l.useRef)(null),ce=Object(l.useState)(!0),re=s()(ce,2),ie=re[0],se=re[1];function ue(){L(""),B(""),ne(""),q(""),ae&&ae.current&&ae.current.focus()}Object(l.useEffect)((function(){J&&L(e.recipient)}),[]),Object(l.useEffect)((function(){if(D){var e="",t=0;try{var n=new URL(D).pathname.split("/").filter((function(e){return!!e}));6===n.length?(e=n[5],t=1):5===n.length?(e=n[3],t=3):2===n.length&&["u","user"].includes(n[0])?q(n[1]):oe(D)}catch(c){D.includes("/")?ie||oe(D):(clearTimeout(a),a=setTimeout((function(){return Object(j.d)(D).then((function(e){e?q(D):ie||oe(D)}))}),250))}[1,3].includes(t)&&B("t".concat(t,"_").concat(e))}}),[D]);var oe=function(e){alert("".concat(e," could not be identified as a Reddit post, comment, or user.")),L("")};function le(){return pe.apply(this,arguments)}function pe(){return(pe=r()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.allowance(n,k.b[i].tipping);case 2:t=e.sent,Z(t.gte(Object(g.b)(H.replace(/,/g,""))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(l.useEffect)((function(){function e(){return(e=r()(o.a.mark((function e(){var t,n,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)("https://www.reddit.com/api/info.json?id=".concat(R));case 2:t=e.sent,n=t.data.children[0],a=n.kind,c=n.data,q(c.author),"t3"===a?ne(c.title):"t1"===a&&ne(c.body);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}R?function(){e.apply(this,arguments)}():ne("")}),[R]),Object(l.useEffect)((function(){function e(){return(e=r()(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)("https://old.reddit.com/user/".concat(J,"/about.json"));case 2:if(t=e.sent,!t.error){e.next=8;break}return L(""),q(""),e.abrupt("return");case 8:return e.next=10,Object(j.c)({username:J});case 10:(n=e.sent)&&!W&&_(n.address);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}J?(se(!R),function(){e.apply(this,arguments)}()):_("")}),[J]),Object(l.useEffect)((function(){E?le():Z(!1)}),[E,H]);var fe,de,me=Object(l.useState)(!0),be=s()(me,2);be[0],be[1];W?(fe=W,de=p.a.createElement("span",{className:"address-logo donut",style:{marginLeft:".25em"},title:"Using donut registered address for ".concat(J," (").concat(fe,")")},"üç©")):J&&i&&(fe=k.b[i].treasuryMultiSig,de=p.a.createElement("span",{className:"address-logo donut",style:{marginLeft:".25em"},title:"".concat(J," can collect from Treasury Multisig (").concat(k.b[i].treasuryMultiSig,")")},"üè¶"));var he,ve,ge,Ee=S||!H||!fe,Oe=h()("complete cute-pink-btn",{disabled:Ee});return he=c?100===i?Y?p.a.createElement("div",{className:Oe,onClick:function(){return function(e,t,n,a,c,r,i){return N.apply(this,arguments)}(v,i,"DONUT",fe,H,R,T)}},"Send Tip"):p.a.createElement("div",{className:Oe,onClick:function(){return function(e,t,n){return y.apply(this,arguments)}(E.connect(v),k.b[i].tipping,T).then(le)}},"Approve"):p.a.createElement("div",{className:Oe,onClick:function(){return Object(j.g)(u,T)}},"Use xDai"):p.a.createElement("div",{className:"complete cute-pink-btn disabled"},"Connect Wallet First"),J&&(ve=p.a.createElement(p.a.Fragment,null,p.a.createElement("a",{style:{textDecoration:"none"},target:"blank",href:"https://www.reddit.com/u/".concat(J)},"/u/",J),p.a.createElement(f.a,{className:"cancel",icon:d.a,onClick:ue}))),ge=ie?p.a.createElement("div",{className:"cute-input target-container"},p.a.createElement("span",{className:"user-prefix",onClick:function(){return ae.current.focus()}},"/u/"),p.a.createElement("input",{ref:ae,value:J,onChange:function(e){var t=e.target.value;clearTimeout(a),a=setTimeout((function(){return Object(j.d)(t).then((function(e){return e&&q(t)}))}),250)},placeholder:"vitalik"}),de):p.a.createElement("div",{className:"cute-input target-container"},p.a.createElement("input",{ref:ae,value:D,onChange:function(e){return L(e.target.value)},onKeyPress:j.e,placeholder:"Paste a reddit post here"})),p.a.createElement("div",{className:"tipping-interface box"},p.a.createElement("div",{className:"tip-token"},"üç©"),p.a.createElement("div",{className:"cute-header tip-info"},ve?p.a.createElement("span",null,"Tipping ",ve):"Choose a ".concat(ie?"User":"Post"," to Tip")),p.a.createElement("div",{className:"tip-token-info"},ve?"EthTrader DONUTs":p.a.createElement("span",null,"Or ",p.a.createElement("a",{onClick:function(){return ue()||se(!ie)}},"click here")," to tip a ",ie?"post":"user")),ie||!te&&!J?ge:p.a.createElement("div",{className:"reddit-preview"},p.a.createElement("h3",{className:"author"},J," ",de),te&&p.a.createElement("p",{className:"body"},te)),p.a.createElement("div",{className:"cute-input quantity-container"},p.a.createElement("input",{value:H,onChange:function(e){return function(e){Q(Object(j.a)(e.replace(/,/g,"")))}(e.target.value)}}),p.a.createElement("div",{className:"token"},"DONUT")),he)}}}]);